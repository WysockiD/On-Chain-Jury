{"ast":null,"code":"import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport classNames from 'classnames';\nimport { CSSMotionList } from 'rc-motion';\nimport createChainedFunction from \"rc-util/es/createChainedFunction\";\nimport Notice from './Notice';\nimport _useNotification from './useNotification';\nvar seed = 0;\nvar now = Date.now();\n\nfunction getUuid() {\n  var id = seed;\n  seed += 1;\n  return \"rcNotification_\".concat(now, \"_\").concat(id);\n}\n\nvar Notification = /*#__PURE__*/function (_Component) {\n  _inherits(Notification, _Component);\n\n  var _super = _createSuper(Notification);\n\n  function Notification() {\n    var _this;\n\n    _classCallCheck(this, Notification);\n\n    _this = _super.apply(this, arguments);\n    _this.state = {\n      notices: []\n    };\n    _this.hookRefs = new Map();\n\n    _this.add = function (originNotice, holderCallback) {\n      var key = originNotice.key || getUuid();\n\n      var notice = _objectSpread(_objectSpread({}, originNotice), {}, {\n        key: key\n      });\n\n      var maxCount = _this.props.maxCount;\n\n      _this.setState(function (previousState) {\n        var notices = previousState.notices;\n        var noticeIndex = notices.map(function (v) {\n          return v.notice.key;\n        }).indexOf(key);\n        var updatedNotices = notices.concat();\n\n        if (noticeIndex !== -1) {\n          updatedNotices.splice(noticeIndex, 1, {\n            notice: notice,\n            holderCallback: holderCallback\n          });\n        } else {\n          if (maxCount && notices.length >= maxCount) {\n            // XXX, use key of first item to update new added (let React to move exsiting\n            // instead of remove and mount). Same key was used before for both a) external\n            // manual control and b) internal react 'key' prop , which is not that good.\n            // eslint-disable-next-line no-param-reassign\n            // zombieJ: Not know why use `updateKey`. This makes Notice infinite loop in jest.\n            // Change to `updateMark` for compare instead.\n            // https://github.com/react-component/notification/commit/32299e6be396f94040bfa82517eea940db947ece\n            notice.key = updatedNotices[0].notice.key;\n            notice.updateMark = getUuid();\n            updatedNotices.shift();\n          }\n\n          updatedNotices.push({\n            notice: notice,\n            holderCallback: holderCallback\n          });\n        }\n\n        return {\n          notices: updatedNotices\n        };\n      });\n    };\n\n    _this.remove = function (key) {\n      _this.setState(function (_ref) {\n        var notices = _ref.notices;\n        return {\n          notices: notices.filter(function (_ref2) {\n            var notice = _ref2.notice;\n            return notice.key !== key;\n          })\n        };\n      });\n    };\n\n    _this.noticePropsMap = {};\n    return _this;\n  }\n\n  _createClass(Notification, [{\n    key: \"getTransitionName\",\n    value: function getTransitionName() {\n      var _this$props = this.props,\n          prefixCls = _this$props.prefixCls,\n          animation = _this$props.animation;\n      var transitionName = this.props.transitionName;\n\n      if (!transitionName && animation) {\n        transitionName = \"\".concat(prefixCls, \"-\").concat(animation);\n      }\n\n      return transitionName;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var notices = this.state.notices;\n      var _this$props2 = this.props,\n          prefixCls = _this$props2.prefixCls,\n          className = _this$props2.className,\n          closeIcon = _this$props2.closeIcon,\n          style = _this$props2.style;\n      var noticeKeys = [];\n      notices.forEach(function (_ref3, index) {\n        var notice = _ref3.notice,\n            holderCallback = _ref3.holderCallback;\n        var updateMark = index === notices.length - 1 ? notice.updateMark : undefined;\n        var key = notice.key;\n        var onClose = createChainedFunction(_this2.remove.bind(_this2, key), notice.onClose);\n\n        var noticeProps = _objectSpread(_objectSpread(_objectSpread({\n          prefixCls: prefixCls,\n          closeIcon: closeIcon\n        }, notice), notice.props), {}, {\n          key: key,\n          updateMark: updateMark,\n          onClose: onClose,\n          onClick: notice.onClick,\n          children: notice.content\n        }); // Give to motion\n\n\n        noticeKeys.push(key);\n        _this2.noticePropsMap[key] = {\n          props: noticeProps,\n          holderCallback: holderCallback\n        };\n      });\n      return React.createElement(\"div\", {\n        className: classNames(prefixCls, className),\n        style: style\n      }, React.createElement(CSSMotionList, {\n        keys: noticeKeys,\n        motionName: this.getTransitionName(),\n        onVisibleChanged: function onVisibleChanged(changedVisible, _ref4) {\n          var key = _ref4.key;\n\n          if (!changedVisible) {\n            delete _this2.noticePropsMap[key];\n          }\n        }\n      }, function (_ref5) {\n        var key = _ref5.key,\n            motionClassName = _ref5.className,\n            motionStyle = _ref5.style;\n        var _this2$noticePropsMap = _this2.noticePropsMap[key],\n            noticeProps = _this2$noticePropsMap.props,\n            holderCallback = _this2$noticePropsMap.holderCallback;\n\n        if (holderCallback) {\n          return React.createElement(\"div\", {\n            key: key,\n            className: classNames(motionClassName, \"\".concat(prefixCls, \"-hook-holder\")),\n            style: _objectSpread({}, motionStyle),\n            ref: function ref(div) {\n              if (typeof key === 'undefined') {\n                return;\n              }\n\n              if (div) {\n                _this2.hookRefs.set(key, div);\n\n                holderCallback(div, noticeProps);\n              } else {\n                _this2.hookRefs.delete(key);\n              }\n            }\n          });\n        }\n\n        return React.createElement(Notice, Object.assign({}, noticeProps, {\n          className: classNames(motionClassName, noticeProps === null || noticeProps === void 0 ? void 0 : noticeProps.className),\n          style: _objectSpread(_objectSpread({}, motionStyle), noticeProps === null || noticeProps === void 0 ? void 0 : noticeProps.style)\n        }));\n      }));\n    }\n  }]);\n\n  return Notification;\n}(Component);\n\nNotification.defaultProps = {\n  prefixCls: 'rc-notification',\n  animation: 'fade',\n  style: {\n    top: 65,\n    left: '50%'\n  }\n};\n\nNotification.newInstance = function newNotificationInstance(properties, callback) {\n  var _ref6 = properties || {},\n      getContainer = _ref6.getContainer,\n      props = _objectWithoutProperties(_ref6, [\"getContainer\"]);\n\n  var div = document.createElement('div');\n\n  if (getContainer) {\n    var root = getContainer();\n    root.appendChild(div);\n  } else {\n    document.body.appendChild(div);\n  }\n\n  var called = false;\n\n  function ref(notification) {\n    if (called) {\n      return;\n    }\n\n    called = true;\n    callback({\n      notice: function notice(noticeProps) {\n        notification.add(noticeProps);\n      },\n      removeNotice: function removeNotice(key) {\n        notification.remove(key);\n      },\n      component: notification,\n      destroy: function destroy() {\n        ReactDOM.unmountComponentAtNode(div);\n\n        if (div.parentNode) {\n          div.parentNode.removeChild(div);\n        }\n      },\n      // Hooks\n      useNotification: function useNotification() {\n        return _useNotification(notification);\n      }\n    });\n  } // Only used for test case usage\n\n\n  if (process.env.NODE_ENV === 'test' && properties.TEST_RENDER) {\n    properties.TEST_RENDER(React.createElement(Notification, Object.assign({}, props, {\n      ref: ref\n    })));\n    return;\n  }\n\n  ReactDOM.render(React.createElement(Notification, Object.assign({}, props, {\n    ref: ref\n  })), div);\n};\n\nexport default Notification;","map":{"version":3,"sources":["/home/dylan/scaffold-eth/node_modules/rc-notification/es/Notification.js"],"names":["_objectWithoutProperties","_objectSpread","_classCallCheck","_createClass","_inherits","_createSuper","React","Component","ReactDOM","classNames","CSSMotionList","createChainedFunction","Notice","_useNotification","seed","now","Date","getUuid","id","concat","Notification","_Component","_super","_this","apply","arguments","state","notices","hookRefs","Map","add","originNotice","holderCallback","key","notice","maxCount","props","setState","previousState","noticeIndex","map","v","indexOf","updatedNotices","splice","length","updateMark","shift","push","remove","_ref","filter","_ref2","noticePropsMap","value","getTransitionName","_this$props","prefixCls","animation","transitionName","render","_this2","_this$props2","className","closeIcon","style","noticeKeys","forEach","_ref3","index","undefined","onClose","bind","noticeProps","onClick","children","content","createElement","keys","motionName","onVisibleChanged","changedVisible","_ref4","_ref5","motionClassName","motionStyle","_this2$noticePropsMap","ref","div","set","delete","Object","assign","defaultProps","top","left","newInstance","newNotificationInstance","properties","callback","_ref6","getContainer","document","root","appendChild","body","called","notification","removeNotice","component","destroy","unmountComponentAtNode","parentNode","removeChild","useNotification","process","env","NODE_ENV","TEST_RENDER"],"mappings":"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","sourcesContent":["import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport classNames from 'classnames';\nimport { CSSMotionList } from 'rc-motion';\nimport createChainedFunction from \"rc-util/es/createChainedFunction\";\nimport Notice from './Notice';\nimport _useNotification from './useNotification';\nvar seed = 0;\nvar now = Date.now();\n\nfunction getUuid() {\n  var id = seed;\n  seed += 1;\n  return \"rcNotification_\".concat(now, \"_\").concat(id);\n}\n\nvar Notification = /*#__PURE__*/function (_Component) {\n  _inherits(Notification, _Component);\n\n  var _super = _createSuper(Notification);\n\n  function Notification() {\n    var _this;\n\n    _classCallCheck(this, Notification);\n\n    _this = _super.apply(this, arguments);\n    _this.state = {\n      notices: []\n    };\n    _this.hookRefs = new Map();\n\n    _this.add = function (originNotice, holderCallback) {\n      var key = originNotice.key || getUuid();\n\n      var notice = _objectSpread(_objectSpread({}, originNotice), {}, {\n        key: key\n      });\n\n      var maxCount = _this.props.maxCount;\n\n      _this.setState(function (previousState) {\n        var notices = previousState.notices;\n        var noticeIndex = notices.map(function (v) {\n          return v.notice.key;\n        }).indexOf(key);\n        var updatedNotices = notices.concat();\n\n        if (noticeIndex !== -1) {\n          updatedNotices.splice(noticeIndex, 1, {\n            notice: notice,\n            holderCallback: holderCallback\n          });\n        } else {\n          if (maxCount && notices.length >= maxCount) {\n            // XXX, use key of first item to update new added (let React to move exsiting\n            // instead of remove and mount). Same key was used before for both a) external\n            // manual control and b) internal react 'key' prop , which is not that good.\n            // eslint-disable-next-line no-param-reassign\n            // zombieJ: Not know why use `updateKey`. This makes Notice infinite loop in jest.\n            // Change to `updateMark` for compare instead.\n            // https://github.com/react-component/notification/commit/32299e6be396f94040bfa82517eea940db947ece\n            notice.key = updatedNotices[0].notice.key;\n            notice.updateMark = getUuid();\n            updatedNotices.shift();\n          }\n\n          updatedNotices.push({\n            notice: notice,\n            holderCallback: holderCallback\n          });\n        }\n\n        return {\n          notices: updatedNotices\n        };\n      });\n    };\n\n    _this.remove = function (key) {\n      _this.setState(function (_ref) {\n        var notices = _ref.notices;\n        return {\n          notices: notices.filter(function (_ref2) {\n            var notice = _ref2.notice;\n            return notice.key !== key;\n          })\n        };\n      });\n    };\n\n    _this.noticePropsMap = {};\n    return _this;\n  }\n\n  _createClass(Notification, [{\n    key: \"getTransitionName\",\n    value: function getTransitionName() {\n      var _this$props = this.props,\n          prefixCls = _this$props.prefixCls,\n          animation = _this$props.animation;\n      var transitionName = this.props.transitionName;\n\n      if (!transitionName && animation) {\n        transitionName = \"\".concat(prefixCls, \"-\").concat(animation);\n      }\n\n      return transitionName;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var notices = this.state.notices;\n      var _this$props2 = this.props,\n          prefixCls = _this$props2.prefixCls,\n          className = _this$props2.className,\n          closeIcon = _this$props2.closeIcon,\n          style = _this$props2.style;\n      var noticeKeys = [];\n      notices.forEach(function (_ref3, index) {\n        var notice = _ref3.notice,\n            holderCallback = _ref3.holderCallback;\n        var updateMark = index === notices.length - 1 ? notice.updateMark : undefined;\n        var key = notice.key;\n        var onClose = createChainedFunction(_this2.remove.bind(_this2, key), notice.onClose);\n\n        var noticeProps = _objectSpread(_objectSpread(_objectSpread({\n          prefixCls: prefixCls,\n          closeIcon: closeIcon\n        }, notice), notice.props), {}, {\n          key: key,\n          updateMark: updateMark,\n          onClose: onClose,\n          onClick: notice.onClick,\n          children: notice.content\n        }); // Give to motion\n\n\n        noticeKeys.push(key);\n        _this2.noticePropsMap[key] = {\n          props: noticeProps,\n          holderCallback: holderCallback\n        };\n      });\n      return React.createElement(\"div\", {\n        className: classNames(prefixCls, className),\n        style: style\n      }, React.createElement(CSSMotionList, {\n        keys: noticeKeys,\n        motionName: this.getTransitionName(),\n        onVisibleChanged: function onVisibleChanged(changedVisible, _ref4) {\n          var key = _ref4.key;\n\n          if (!changedVisible) {\n            delete _this2.noticePropsMap[key];\n          }\n        }\n      }, function (_ref5) {\n        var key = _ref5.key,\n            motionClassName = _ref5.className,\n            motionStyle = _ref5.style;\n        var _this2$noticePropsMap = _this2.noticePropsMap[key],\n            noticeProps = _this2$noticePropsMap.props,\n            holderCallback = _this2$noticePropsMap.holderCallback;\n\n        if (holderCallback) {\n          return React.createElement(\"div\", {\n            key: key,\n            className: classNames(motionClassName, \"\".concat(prefixCls, \"-hook-holder\")),\n            style: _objectSpread({}, motionStyle),\n            ref: function ref(div) {\n              if (typeof key === 'undefined') {\n                return;\n              }\n\n              if (div) {\n                _this2.hookRefs.set(key, div);\n\n                holderCallback(div, noticeProps);\n              } else {\n                _this2.hookRefs.delete(key);\n              }\n            }\n          });\n        }\n\n        return React.createElement(Notice, Object.assign({}, noticeProps, {\n          className: classNames(motionClassName, noticeProps === null || noticeProps === void 0 ? void 0 : noticeProps.className),\n          style: _objectSpread(_objectSpread({}, motionStyle), noticeProps === null || noticeProps === void 0 ? void 0 : noticeProps.style)\n        }));\n      }));\n    }\n  }]);\n\n  return Notification;\n}(Component);\n\nNotification.defaultProps = {\n  prefixCls: 'rc-notification',\n  animation: 'fade',\n  style: {\n    top: 65,\n    left: '50%'\n  }\n};\n\nNotification.newInstance = function newNotificationInstance(properties, callback) {\n  var _ref6 = properties || {},\n      getContainer = _ref6.getContainer,\n      props = _objectWithoutProperties(_ref6, [\"getContainer\"]);\n\n  var div = document.createElement('div');\n\n  if (getContainer) {\n    var root = getContainer();\n    root.appendChild(div);\n  } else {\n    document.body.appendChild(div);\n  }\n\n  var called = false;\n\n  function ref(notification) {\n    if (called) {\n      return;\n    }\n\n    called = true;\n    callback({\n      notice: function notice(noticeProps) {\n        notification.add(noticeProps);\n      },\n      removeNotice: function removeNotice(key) {\n        notification.remove(key);\n      },\n      component: notification,\n      destroy: function destroy() {\n        ReactDOM.unmountComponentAtNode(div);\n\n        if (div.parentNode) {\n          div.parentNode.removeChild(div);\n        }\n      },\n      // Hooks\n      useNotification: function useNotification() {\n        return _useNotification(notification);\n      }\n    });\n  } // Only used for test case usage\n\n\n  if (process.env.NODE_ENV === 'test' && properties.TEST_RENDER) {\n    properties.TEST_RENDER(React.createElement(Notification, Object.assign({}, props, {\n      ref: ref\n    })));\n    return;\n  }\n\n  ReactDOM.render(React.createElement(Notification, Object.assign({}, props, {\n    ref: ref\n  })), div);\n};\n\nexport default Notification;"]},"metadata":{},"sourceType":"module"}